<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de CSTs do ICMS</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .language-selector {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
        }

        .lang-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .lang-btn.active {
            background: rgba(255, 255, 255, 0.3);
            font-weight: bold;
        }

        .filters {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 25px;
            padding: 15px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }

        .filter-group {
            flex: 1;
            min-width: 200px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #444;
        }

        select, input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }

        .cst-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .cst-card {
            background-color: white;
            border-radius: 8px;
            padding: 15px 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            border: 2px solid transparent;
        }

        .cst-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .cst-code {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .cst-origin {
            font-size: 0.8rem;
            color: #666;
        }

        .cst-tributacao {
            font-size: 0.75rem;
            margin-top: 5px;
            font-weight: 500;
        }

        .details-panel {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            display: none;
        }

        .details-panel.active {
            display: block;
        }

        .details-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .details-cst {
            font-size: 2rem;
            font-weight: bold;
            color: #1e3c72;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }

        .details-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .detail-section {
            margin-bottom: 15px;
        }

        .detail-label {
            font-weight: 600;
            color: #555;
            margin-bottom: 5px;
        }

        .detail-value {
            color: #333;
        }

        .stats {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #eee;
            font-size: 0.9rem;
            color: #666;
        }

        /* Cores por origem */
        .origin-0, .origin-3, .origin-4, .origin-5, .origin-8 {
            border-color: #3498db;
        }

        .origin-1, .origin-6 {
            border-color: #e74c3c;
        }

        .origin-2, .origin-7 {
            border-color: #f39c12;
        }

        /* Cores por tributação */
        .trib-00 { background-color: #e8f6f3; }
        .trib-10 { background-color: #fef9e7; }
        .trib-20 { background-color: #eaf2f8; }
        .trib-30 { background-color: #f4ecf7; }
        .trib-40, .trib-41 { background-color: #e8f8f5; }
        .trib-50, .trib-51 { background-color: #fdebd0; }
        .trib-60 { background-color: #fadbd8; }
        .trib-70 { background-color: #d6eaf8; }
        .trib-90 { background-color: #f4f6f6; }

        @media (max-width: 768px) {
            .details-content {
                grid-template-columns: 1fr;
            }
            
            .cst-grid {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1 id="header-title">Sistema de CSTs do ICMS</h1>
            <p class="subtitle" id="header-subtitle">Códigos de Situação Tributária - Visualização e Detalhes</p>
            <div class="language-selector">
                <button class="lang-btn active" data-lang="pt">Português</button>
                <button class="lang-btn" data-lang="en">English</button>
                <button class="lang-btn" data-lang="zh">中文</button>
            </div>
        </header>

        <div class="filters">
            <div class="filter-group">
                <label id="origin-label" for="origin-filter">Filtrar por Origem:</label>
                <select id="origin-filter">
                    <!-- Options will be populated by JavaScript -->
                </select>
            </div>
            <div class="filter-group">
                <label id="tributacao-label" for="tributacao-filter">Filtrar por Tributação:</label>
                <select id="tributacao-filter">
                    <!-- Options will be populated by JavaScript -->
                </select>
            </div>
            <div class="filter-group">
                <label id="buscar-label" for="search">Buscar por CST:</label>
                <input type="text" id="search" placeholder="Ex: 000, 510, 890...">
            </div>
        </div>

        <div class="cst-grid" id="cst-container">
            <!-- Os CSTs serão carregados aqui via JavaScript -->
        </div>

        <div class="details-panel" id="details-panel">
            <div class="details-header">
                <div class="details-cst" id="details-cst-code">000</div>
                <button class="close-btn" id="close-details">&times;</button>
            </div>
            <div class="details-content">
                <div>
                    <div class="detail-section">
                        <div class="detail-label" id="det-origin-label">Origem:</div>
                        <div class="detail-value" id="details-origin">-</div>
                    </div>
                    <div class="detail-section">
                        <div class="detail-label" id="det-tributacao-label">Tributação:</div>
                        <div class="detail-value" id="details-tributacao">-</div>
                    </div>
                    <div class="detail-section">
                        <div class="detail-label" id="det-descricao-label">Descrição:</div>
                        <div class="detail-value" id="details-descricao">-</div>
                    </div>
                </div>
                <div>
                    <div class="detail-section">
                        <div class="detail-label" id="det-significado-label">Significado:</div>
                        <div class="detail-value" id="details-significado">-</div>
                    </div>
                    <div class="detail-section">
                        <div class="detail-label" id="det-aplicacao-label">Aplicação:</div>
                        <div class="detail-value" id="details-aplicacao">-</div>
                    </div>
                </div>
            </div>
            <div class="stats">
                <div><span id="stats-total-label">Total de CSTs</span>: <span id="total-csts">0</span></div>
                <div><span id="stats-filtrados-label">CSTs filtrados</span>: <span id="filtered-csts">0</span></div>
            </div>
        </div>
    </div>

    <script>
        // Base de dados multilíngue
        const languageData = {
            pt: {
                titulo: "Sistema de CSTs do ICMS",
                subtitulo: "Códigos de Situação Tributária - Visualização e Detalhes",
                origem_label: "Filtrar por Origem:",
                tributacao_label: "Filtrar por Tributação:",
                buscar_label: "Buscar por CST:",
                buscar_placeholder: "Ex: 000, 510, 890...",
                det_origem: "Origem:",
                det_tributacao: "Tributação:",
                det_descricao: "Descrição:",
                det_significado: "Significado:",
                det_aplicacao: "Aplicação:",
                stats_total: "Total de CSTs",
                stats_filtrados: "CSTs filtrados",
                abrevia_origem: "Origem",
                abrevia_trib: "Trib",
                origens_options: [
                    { "value": "all", "text": "Todas as Origens" },
                    { "value": "0", "text": "Nacional (0, 3, 4, 5, 8)" },
                    { "value": "1", "text": "Importação Direta (1, 6)" },
                    { "value": "2", "text": "Adquiridos no Brasil (2, 7)" }
                ],
                tributacoes_options: [
                    {"value": "all", "text": "Todas as Tributações"},
                    {"value": "00", "text": "00 - Tributada integralmente"},
                    {"value": "10", "text": "10 - Tributada e com ST"},
                    {"value": "20", "text": "20 - Com redução de BC"},
                    {"value": "30", "text": "30 - Isenta/Não tributada e com ST"},
                    {"value": "40", "text": "40 - Isenta"},
                    {"value": "41", "text": "41 - Não tributada"},
                    {"value": "50", "text": "50 - Suspensão"},
                    {"value": "51", "text": "51 - Diferimento"},
                    {"value": "60", "text": "60 - ICMS cobrado anteriormente por ST"},
                    {"value": "70", "text": "70 - Com redução de BC e ST"},
                    {"value": "90", "text": "90 - Outras"}
                ],
                origens: {
                    "0": "Nacional, exceto as indicadas nos códigos 3, 4, 5 e 8",
                    "1": "Estrangeira – Importação direta, exceto a indicada no código 6",
                    "2": "Estrangeira – Adquirida no mercado interno, exceto a indicada no código 7",
                    "3": "Nacional, mercadoria ou bem com Conteúdo de Importação superior a 40% e igual ou inferior a 70%",
                    "4": "Nacional, cuja produção tenha sido feita em conformidade com os processos produtivos básicos",
                    "5": "Nacional, mercadoria ou bem com Conteúdo de Importação inferior ou igual a 40%",
                    "6": "Estrangeira – Importação direta, sem similar nacional, constante em lista de Resolução Camex e gás natural",
                    "7": "Estrangeira – Adquirida no mercado interno, sem similar nacional, constante em lista de Resolução Camex e gás natural",
                    "8": "Nacional – Mercadoria ou bem com Conteúdo de Importação superior a 70%"
                },
                tributacoes: {
                    "00": { "descricao": "Tributada integralmente", "significado": "ICMS calculado sobre o valor total da operação", "aplicacao":"Operações normais dentro do estado" },
                    "10": { "descricao": "Tributada e com cobrança do ICMS por substituição tributária", "significado": "ICMS normal + ICMS por substituição tributária", "aplicacao": "Operações com ST onde o contribuinte é o substituto tributário" },
                    "20": { "descricao": "Com redução de base de cálculo", "significado": "Base de cálculo reduzida para cálculo do ICMS", "aplicacao": "Produtos com incentivo fiscal ou alíquotas diferenciadas" },
                    "30": { "descricao": "Isenta ou não tributada e com cobrança do ICMS por substituição tributária", "significado": "Operação isenta de ICMS próprio, mas com ST", "aplicacao": "Produtos isentos que têm substituição tributária" },
                    "40": { "descricao": "Isenta", "significado": "Não há incidência de ICMS na operação", "aplicacao": "Operações com imunidade ou isenção específica" },
                    "41": { "descricao": "Não tributada", "significado": "Operação fora do campo de incidência do ICMS", "aplicacao": "Operações que não se enquadram na legislação do ICMS" },
                    "50": { "descricao": "Suspensão", "significado": "ICMS suspenso temporariamente", "aplicacao": "Operações com diferimento ou suspensão por regime especial" },
                    "51": { "descricao": "Diferimento", "significado": "ICMS adiado para operação futura", "aplicacao": "ICMS será pago em etapa posterior da cadeia" },
                    "60": { "descricao": "ICMS cobrado anteriormente por substituição tributária", "significado": "ICMS já foi pago via substituição tributária", "aplicacao": "Operações onde o contribuinte é o substituído" },
                    "70": { "descricao": "Com redução de base de cálculo e cobrança do ICMS por substituição tributária", "significado": "Base reduzida + substituição tributária", "aplicacao": "Produtos com incentivo fiscal e que têm ST" },
                    "90": { "descricao": "Outras", "significado": "Demais hipóteses de tributação", "aplicacao": "Regimes especiais ou casos não previstos nos demais códigos" }
                }
            },
            en: {
                titulo: "ICMS CST System",
                subtitulo: "Tax Situation Codes - Overview and Details",
                origem_label: "Filter by Origin:",
                tributacao_label: "Filter by Taxation:",
                buscar_label: "Search by CST:",
                buscar_placeholder: "E.g.: 000, 510, 890...",
                det_origem: "Origin:",
                det_tributacao: "Taxation:",
                det_descricao: "Description:",
                det_significado: "Meaning:",
                det_aplicacao: "Use Case:",
                stats_total: "Total CSTs",
                stats_filtrados: "CSTs filtered",
                abrevia_origem: "Origin",
                abrevia_trib: "Tax",
                origens_options: [
                    { "value": "all", "text": "All Origins" },
                    { "value": "0", "text": "Domestic (0, 3, 4, 5, 8)" },
                    { "value": "1", "text": "Direct Import (1, 6)" },
                    { "value": "2", "text": "Acquired in Brazil (2, 7)" }
                ],
                tributacoes_options: [
                    {"value": "all", "text": "All Taxations"},
                    {"value": "00", "text": "00 - Fully taxed"},
                    {"value": "10", "text": "10 - Taxed with ST"},
                    {"value": "20", "text": "20 - With base reduction"},
                    {"value": "30", "text": "30 - Exempt/Not taxed with ST"},
                    {"value": "40", "text": "40 - Exempt"},
                    {"value": "41", "text": "41 - Not taxed"},
                    {"value": "50", "text": "50 - Suspension"},
                    {"value": "51", "text": "51 - Deferral"},
                    {"value": "60", "text": "60 - ICMS previously collected by ST"},
                    {"value": "70", "text": "70 - With base reduction and ST"},
                    {"value": "90", "text": "90 - Others"}
                ],
                origens: {
                    "0": "Domestic, except those indicated in codes 3, 4, 5 and 8",
                    "1": "Foreign – Direct import, except the one indicated in code 6",
                    "2": "Foreign – Purchased in the internal market, except as indicated in code 7",
                    "3": "Domestic, goods with Import Content greater than 40% and equal to or less than 70%",
                    "4": "Domestic, whose production followed the basic production processes provided by the indicated laws",
                    "5": "Domestic, goods with Import Content less than or equal to 40%",
                    "6": "Foreign – Direct import, without national equivalent, on the Camex Resolution list and natural gas",
                    "7": "Foreign – Purchased internally, without national equivalent, on the Camex list and natural gas",
                    "8": "Domestic – Goods with Import Content greater than 70%"
                },
                tributacoes: {
                    "00": { "descricao": "Fully taxed", "significado": "ICMS calculated on the total value of the transaction", "aplicacao":"Normal transactions within the state" },
                    "10": { "descricao": "Taxed with tax substitution", "significado": "Regular ICMS + ICMS by substitution", "aplicacao": "Transactions with ST, where the taxpayer is the substitute" },
                    "20": { "descricao": "With base reduction", "significado": "Reduced calculation basis for ICMS", "aplicacao": "Products with fiscal incentives or differentiated tax rates" },
                    "30": { "descricao": "Exempt or not taxed with tax substitution", "significado": "Operation exempt from proper ICMS, but under ST", "aplicacao": "Exempt products subject to tax substitution" },
                    "40": { "descricao": "Exempt", "significado": "No ICMS is levied on the transaction", "aplicacao": "Transactions with immunity or specific exemption" },
                    "41": { "descricao": "Not taxed", "significado": "Operation outside the scope of ICMS", "aplicacao": "Transactions not covered by ICMS law" },
                    "50": { "descricao": "Suspension", "significado": "ICMS temporarily suspended", "aplicacao": "Operations with deferral or suspension by special regime" },
                    "51": { "descricao": "Deferral", "significado": "ICMS postponed to a future transaction", "aplicacao": "ICMS will be paid at a later stage" },
                    "60": { "descricao": "ICMS previously collected by tax substitution", "significado": "ICMS was already paid via tax substitution", "aplicacao": "Operations where the taxpayer is the replaced one" },
                    "70": { "descricao": "With base reduction and tax substitution", "significado": "Reduced base + tax substitution", "aplicacao": "Products with fiscal incentive and ST" },
                    "90": { "descricao": "Others", "significado": "Other taxation hypotheses", "aplicacao": "Special regimes or cases not provided for in other codes" }
                }
            },
            zh: {
                titulo: "ICMS CST 系统",
                subtitulo: "税收情形代码 - 查看与详情",
                origem_label: "按产地筛选：",
                tributacao_label: "按征税方式筛选：",
                buscar_label: "按CST代码搜索：",
                buscar_placeholder: "例如: 000, 510, 890...",
                det_origem: "产地：",
                det_tributacao: "征税方式：",
                det_descricao: "描述：",
                det_significado: "含义：",
                det_aplicacao: "适用情况：",
                stats_total: "CST总数",
                stats_filtrados: "筛选CST数",
                abrevia_origem: "产地",
                abrevia_trib: "税别",
                origens_options: [
                    { "value": "all", "text": "所有产地" },
                    { "value": "0", "text": "本国产品 (0, 3, 4, 5, 8)" },
                    { "value": "1", "text": "直接进口 (1, 6)" },
                    { "value": "2", "text": "巴西采购 (2, 7)" }
                ],
                tributacoes_options: [
                    {"value": "all", "text": "所有征税方式"},
                    {"value": "00", "text": "00 - 全额征税"},
                    {"value": "10", "text": "10 - 正常+ST征收"},
                    {"value": "20", "text": "20 - 降低计税基数"},
                    {"value": "30", "text": "30 - 免税/不征税且有ST"},
                    {"value": "40", "text": "40 - 免税"},
                    {"value": "41", "text": "41 - 不征税"},
                    {"value": "50", "text": "50 - 暂缓征税"},
                    {"value": "51", "text": "51 - 延期征税"},
                    {"value": "60", "text": "60 - 前期已由ST缴纳"},
                    {"value": "70", "text": "70 - 降低基数且有ST"},
                    {"value": "90", "text": "90 - 其他"}
                ],
                origens: {
                    "0": "本国产品，除代码3, 4, 5, 8指示者外",
                    "1": "进口商品——直接进口，除代码6指示者外",
                    "2": "进口商品——巴西国内采购，除代码7指示者外",
                    "3": "本国产品，进口含量超过40%且不高于70%",
                    "4": "本国产品，符合相关法律规定的基本生产流程",
                    "5": "本国产品，进口含量不超过40%",
                    "6": "进口商品——直接进口，无同类国产，列入Camex决议清单及天然气",
                    "7": "进口商品——巴西国内采购，无同类国产，列入Camex清单及天然气",
                    "8": "本国产品，进口含量超过70%"
                },
                tributacoes: {
                    "00": { "descricao": "全额征税", "significado": "对全部交易额征收ICMS", "aplicacao":"州内常规交易" },
                    "10": { "descricao": "正常+ST征收", "significado": "普通ICMS+替代征收（ST）", "aplicacao": "纳税人为替代纳税人的交易" },
                    "20": { "descricao": "降低计税基数", "significado": "降低ICMS计税基数", "aplicacao": "享受税收优惠或不同税率的产品" },
                    "30": { "descricao": "免税/不征税且有ST", "significado": "自身免ICMS但有ST", "aplicacao": "免税但需替代征收的商品" },
                    "40": { "descricao": "免税", "significado": "本交易不征收ICMS", "aplicacao": "享有免征或豁免情形的交易" },
                    "41": { "descricao": "不征税", "significado": "本交易不属于ICMS征税范围", "aplicacao": "无ICMS规定的情形" },
                    "50": { "descricao": "暂缓征税", "significado": "ICMS暂时豁免", "aplicacao": "特殊政策导致的递延或免税" },
                    "51": { "descricao": "延期征税", "significado": "ICMS延后到后续环节", "aplicacao": "链条后续环节再纳ICMS" },
                    "60": { "descricao": "前期已由ST缴纳", "significado": "ICMS已由ST方式缴纳", "aplicacao": "本企业为被替代纳税人" },
                    "70": { "descricao": "降低基数且有ST", "significado": "低基数+替代征收", "aplicacao": "有税收激励且适用ST的商品" },
                    "90": { "descricao": "其他", "significado": "其他征税情形", "aplicacao": "特殊规定或未涵盖情形" }
                }
            }
        };

        // Lista completa de CSTs válidos
        const cstsValidos = [
            // 00 - Tributada integralmente
            "000", "300", "400", "500", "800", "100", "600", "200", "700",
            // 10 - Tributada e com cobrança do ICMS por ST
            "010", "310", "410", "510", "810", "110", "610", "210", "710",
            // 20 - Com redução de base de cálculo
            "020", "320", "420", "520", "820", "120", "620", "220", "720",
            // 30 - Isenta/Não tributada e com cobrança do ICMS por ST
            "030", "330", "430", "530", "830", "130", "630", "230", "730",
            // 40 - Isenta
            "040", "340", "440", "540", "840", "140", "640", "240", "740",
            // 41 - Não Tributada
            "041", "341", "441", "541", "841", "141", "641", "241", "741",
            // 50 - Com Suspensão
            "050", "350", "450", "550", "850", "150", "650", "250", "750",
            // 51 - Com Diferimento
            "051", "351", "451", "551", "851", "151", "651", "251", "751",
            // 60 - ICMS Cobrado na Operação Anterior por Substituição Tributária
            "060", "360", "460", "560", "860", "160", "660", "260", "760",
            // 70 - Com redução de base de cálculo no ICMS ST
            "070", "370", "470", "570", "870", "170", "670", "270", "770",
            // 90 - Outras Operações
            "090", "390", "490", "590", "890", "190", "690", "290", "790"
        ];

        // Elementos DOM
        const cstContainer = document.getElementById('cst-container');
        const detailsPanel = document.getElementById('details-panel');
        const closeDetailsBtn = document.getElementById('close-details');
        const originFilter = document.getElementById('origin-filter');
        const tributacaoFilter = document.getElementById('tributacao-filter');
        const searchInput = document.getElementById('search');
        const totalCstsSpan = document.getElementById('total-csts');
        const filteredCstsSpan = document.getElementById('filtered-csts');
        const langButtons = document.querySelectorAll('.lang-btn');

        // Variável para controlar o idioma atual
        let currentLang = 'pt';

        // Inicialização
        document.addEventListener('DOMContentLoaded', function() {
            updateLanguage();
            renderCSTs();
            totalCstsSpan.textContent = cstsValidos.length;
            
            // Event listeners para filtros
            originFilter.addEventListener('change', renderCSTs);
            tributacaoFilter.addEventListener('change', renderCSTs);
            searchInput.addEventListener('input', renderCSTs);
            closeDetailsBtn.addEventListener('click', closeDetails);
            
            // Event listeners para botões de idioma
            langButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    // Remove a classe active de todos os botões
                    langButtons.forEach(b => b.classList.remove('active'));
                    // Adiciona a classe active ao botão clicado
                    this.classList.add('active');
                    // Atualiza o idioma
                    currentLang = this.getAttribute('data-lang');
                    updateLanguage();
                    renderCSTs();
                });
            });
        });

        // Função para atualizar o idioma da interface
        function updateLanguage() {
            const langData = languageData[currentLang];
            
            // Atualiza os textos da interface
            document.getElementById('header-title').textContent = langData.titulo;
            document.getElementById('header-subtitle').textContent = langData.subtitulo;
            document.getElementById('origin-label').textContent = langData.origem_label;
            document.getElementById('tributacao-label').textContent = langData.tributacao_label;
            document.getElementById('buscar-label').textContent = langData.buscar_label;
            document.getElementById('search').placeholder = langData.buscar_placeholder;
            document.getElementById('det-origin-label').textContent = langData.det_origem;
            document.getElementById('det-tributacao-label').textContent = langData.det_tributacao;
            document.getElementById('det-descricao-label').textContent = langData.det_descricao;
            document.getElementById('det-significado-label').textContent = langData.det_significado;
            document.getElementById('det-aplicacao-label').textContent = langData.det_aplicacao;
            document.getElementById('stats-total-label').textContent = langData.stats_total;
            document.getElementById('stats-filtrados-label').textContent = langData.stats_filtrados;
            
            // Atualiza as opções dos filtros
            updateFilterOptions();
        }

        // Função para atualizar as opções dos filtros
        function updateFilterOptions() {
            const langData = languageData[currentLang];
            
            // Atualiza o filtro de origem
            originFilter.innerHTML = '';
            langData.origens_options.forEach(option => {
                const opt = document.createElement('option');
                opt.value = option.value;
                opt.textContent = option.text;
                originFilter.appendChild(opt);
            });
            
            // Atualiza o filtro de tributação
            tributacaoFilter.innerHTML = '';
            langData.tributacoes_options.forEach(option => {
                const opt = document.createElement('option');
                opt.value = option.value;
                opt.textContent = option.text;
                tributacaoFilter.appendChild(opt);
            });
        }

        // Função para renderizar os CSTs com base nos filtros
        function renderCSTs() {
            cstContainer.innerHTML = '';
            
            const originFilterValue = originFilter.value;
            const tributacaoFilterValue = tributacaoFilter.value;
            const searchValue = searchInput.value.toLowerCase();
            const langData = languageData[currentLang];
            
            let filteredCsts = cstsValidos.filter(cst => {
                const origem = cst[0];
                const tributacao = cst.substring(1);
                
                // Aplicar filtros
                if (originFilterValue !== 'all') {
                    if (originFilterValue === '0' && !['0','3','4','5','8'].includes(origem)) return false;
                    if (originFilterValue === '1' && !['1','6'].includes(origem)) return false;
                    if (originFilterValue === '2' && !['2','7'].includes(origem)) return false;
                }
                
                if (tributacaoFilterValue !== 'all' && tributacao !== tributacaoFilterValue) {
                    return false;
                }
                
                if (searchValue && !cst.includes(searchValue)) {
                    return false;
                }
                
                return true;
            });
            
            filteredCstsSpan.textContent = filteredCsts.length;
            
            // Renderizar cada CST
            filteredCsts.forEach(cst => {
                const origem = cst[0];
                const tributacao = cst.substring(1);
                
                const cstCard = document.createElement('div');
                cstCard.className = `cst-card origin-${origem} trib-${tributacao}`;
                cstCard.setAttribute('data-cst', cst);
                
                cstCard.innerHTML = `
                    <div class="cst-code">${cst}</div>
                    <div class="cst-origin">${langData.abrevia_origem}: ${origem}</div>
                    <div class="cst-tributacao">${langData.abrevia_trib}: ${tributacao}</div>
                `;
                
                cstCard.addEventListener('click', () => showDetails(cst));
                cstContainer.appendChild(cstCard);
            });
        }

        // Função para exibir detalhes do CST
        function showDetails(cst) {
            const origem = cst[0];
            const tributacao = cst.substring(1);
            const langData = languageData[currentLang];
            
            document.getElementById('details-cst-code').textContent = cst;
            document.getElementById('details-origin').textContent = langData.origens[origem];
            document.getElementById('details-tributacao').textContent = langData.tributacoes[tributacao].descricao;
            document.getElementById('details-descricao').textContent = langData.tributacoes[tributacao].descricao;
            document.getElementById('details-significado').textContent = langData.tributacoes[tributacao].significado;
            document.getElementById('details-aplicacao').textContent = langData.tributacoes[tributacao].aplicacao;
            
            detailsPanel.classList.add('active');
        }

        // Função para fechar os detalhes
        function closeDetails() {
            detailsPanel.classList.remove('active');
        }
    </script>
</body>
</html>
